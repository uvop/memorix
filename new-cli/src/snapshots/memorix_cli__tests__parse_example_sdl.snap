---
source: src/main.rs
assertion_line: 386
expression: "codegen(&mock_fs, \"schema.memorix\")?"
---
[
  {
    "global_namespace": {
      "type_object_items": [],
      "modified_namespace": {
        "defaults": {
          "cache_ttl": null,
          "task_queue_type": null
        },
        "type_items": [
          [
            "abc",
            "U32"
          ]
        ],
        "enum_items": [],
        "cache_items": [
          [
            "number_of_messages",
            {
              "key": null,
              "payload": "U32",
              "ttl": null,
              "expose": [
                "Get",
                "Set",
                "Delete"
              ]
            }
          ],
          [
            "messages",
            {
              "key": "String",
              "payload": "String",
              "ttl": null,
              "expose": [
                "Get",
                "Set",
                "Delete"
              ]
            }
          ]
        ],
        "pubsub_items": [],
        "task_items": []
      }
    },
    "namespaces": []
  },
  {
    "global_namespace": {
      "type_object_items": [
        [
          "InlineCachePayloadUserProfile",
          {
            "properties": [
              [
                "id",
                "U32"
              ],
              [
                "name",
                "String"
              ],
              [
                "email",
                "String"
              ]
            ]
          }
        ],
        [
          "InlineCachePayloadUserSession",
          {
            "properties": [
              [
                "user_id",
                "U32"
              ],
              [
                "session_token",
                "String"
              ],
              [
                "expiry",
                "U64"
              ]
            ]
          }
        ]
      ],
      "modified_namespace": {
        "defaults": {
          "cache_ttl": {
            "String": "3600"
          },
          "task_queue_type": null
        },
        "type_items": [
          [
            "abc",
            "U32"
          ]
        ],
        "enum_items": [],
        "cache_items": [
          [
            "user_profile",
            {
              "key": "U32",
              "payload": {
                "Reference": "InlineCachePayloadUserProfile"
              },
              "ttl": null,
              "expose": [
                "Get",
                "Set",
                "Delete"
              ]
            }
          ],
          [
            "user_session",
            {
              "key": "String",
              "payload": {
                "Reference": "InlineCachePayloadUserSession"
              },
              "ttl": {
                "Env": "USER_SESSION_TTL"
              },
              "expose": [
                "Get",
                "Set",
                "Delete"
              ]
            }
          ],
          [
            "number_of_messages",
            {
              "key": null,
              "payload": "U32",
              "ttl": null,
              "expose": [
                "Get"
              ]
            }
          ]
        ],
        "pubsub_items": [],
        "task_items": []
      }
    },
    "namespaces": [
      [
        "MessageService",
        {
          "type_object_items": [
            [
              "InlineCachePayloadMessage",
              {
                "properties": [
                  [
                    "id",
                    "String"
                  ],
                  [
                    "sender_id",
                    {
                      "Reference": "UserId"
                    }
                  ],
                  [
                    "recipient_id",
                    {
                      "Reference": "UserId"
                    }
                  ],
                  [
                    "content",
                    "String"
                  ],
                  [
                    "timestamp",
                    "U64"
                  ]
                ]
              }
            ],
            [
              "InlinePubSubPayloadNewMessage",
              {
                "properties": [
                  [
                    "message_id",
                    "String"
                  ],
                  [
                    "recipient_id",
                    {
                      "Reference": "UserId"
                    }
                  ]
                ]
              }
            ],
            [
              "InlineTaskPayloadMessageProcessingTasks",
              {
                "properties": [
                  [
                    "message_id",
                    "String"
                  ],
                  [
                    "processing_type",
                    "String"
                  ],
                  [
                    "priority",
                    "U32"
                  ]
                ]
              }
            ]
          ],
          "modified_namespace": {
            "defaults": {
              "cache_ttl": null,
              "task_queue_type": null
            },
            "type_items": [],
            "enum_items": [
              [
                "Operation",
                [
                  "START",
                  "STOP"
                ]
              ]
            ],
            "cache_items": [
              [
                "message",
                {
                  "key": "String",
                  "payload": {
                    "Reference": "InlineCachePayloadMessage"
                  },
                  "ttl": null,
                  "expose": [
                    "Get",
                    "Set",
                    "Delete"
                  ]
                }
              ]
            ],
            "pubsub_items": [
              [
                "new_message",
                {
                  "key": {
                    "Reference": "UserId"
                  },
                  "payload": {
                    "Reference": "InlinePubSubPayloadNewMessage"
                  },
                  "expose": [
                    "Publish",
                    "Subscribe"
                  ]
                }
              ]
            ],
            "task_items": [
              [
                "message_processing_tasks",
                {
                  "key": null,
                  "payload": {
                    "Reference": "InlineTaskPayloadMessageProcessingTasks"
                  },
                  "queue_type": {
                    "String": "Fifo"
                  },
                  "expose": [
                    "Enqueue",
                    "Dequeue",
                    "Empty",
                    "GetLen"
                  ]
                }
              ]
            ]
          }
        }
      ],
      [
        "UserService",
        {
          "type_object_items": [
            [
              "InlineCachePayloadUserProfile",
              {
                "properties": [
                  [
                    "id",
                    {
                      "Reference": "UserId"
                    }
                  ],
                  [
                    "name",
                    "String"
                  ],
                  [
                    "email",
                    "String"
                  ]
                ]
              }
            ],
            [
              "InlineCachePayloadUserSession",
              {
                "properties": [
                  [
                    "user_id",
                    {
                      "Reference": "UserId"
                    }
                  ],
                  [
                    "session_token",
                    "String"
                  ],
                  [
                    "expiry",
                    "U64"
                  ]
                ]
              }
            ],
            [
              "InlinePubSubPayloadUserActivity",
              {
                "properties": [
                  [
                    "user_id",
                    {
                      "Reference": "UserId"
                    }
                  ],
                  [
                    "action",
                    {
                      "Optional": "String"
                    }
                  ],
                  [
                    "timestamp",
                    "U64"
                  ]
                ]
              }
            ],
            [
              "InlineTaskPayloadUserRegistrationTasks",
              {
                "properties": [
                  [
                    "user_id",
                    {
                      "Reference": "UserId"
                    }
                  ],
                  [
                    "email",
                    "String"
                  ],
                  [
                    "registration_date",
                    "U64"
                  ]
                ]
              }
            ]
          ],
          "modified_namespace": {
            "defaults": {
              "cache_ttl": {
                "String": "7200"
              },
              "task_queue_type": {
                "Env": "USER_SERVICE_TASK_QUEUE_TYPE"
              }
            },
            "type_items": [
              [
                "UserId",
                "U64"
              ]
            ],
            "enum_items": [],
            "cache_items": [
              [
                "user_profile",
                {
                  "key": {
                    "Reference": "UserId"
                  },
                  "payload": {
                    "Reference": "InlineCachePayloadUserProfile"
                  },
                  "ttl": null,
                  "expose": [
                    "Get",
                    "Set",
                    "Delete"
                  ]
                }
              ],
              [
                "user_session",
                {
                  "key": "String",
                  "payload": {
                    "Reference": "InlineCachePayloadUserSession"
                  },
                  "ttl": {
                    "Env": "USER_SESSION_TTL"
                  },
                  "expose": [
                    "Get",
                    "Set",
                    "Delete"
                  ]
                }
              ]
            ],
            "pubsub_items": [
              [
                "user_activity",
                {
                  "key": {
                    "Reference": "UserId"
                  },
                  "payload": {
                    "Reference": "InlinePubSubPayloadUserActivity"
                  },
                  "expose": [
                    "Publish",
                    "Subscribe"
                  ]
                }
              ]
            ],
            "task_items": [
              [
                "user_registration_tasks",
                {
                  "key": null,
                  "payload": {
                    "Reference": "InlineTaskPayloadUserRegistrationTasks"
                  },
                  "queue_type": null,
                  "expose": [
                    "Enqueue",
                    "Dequeue",
                    "Empty",
                    "GetLen"
                  ]
                }
              ]
            ]
          }
        }
      ]
    ]
  }
]
